<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Carey Metcalfe">
  <meta name="description" content="Posts by Carey Metcalfe">

  <link rel="stylesheet" type="text/css" href="../theme/css/styles.ec0bdb0f.min.css">

  <script src="../theme/js/scripts.7db5858b.min.js" type="text/javascript"></script>

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">

  <link href="https://cmetcalfe.ca/feeds/all.rss" type="application/rss+xml" rel="alternate" title="Carey Metcalfe Full RSS Feed" />

  <meta name="keywords" content="blog, carey, cmetcalfe, metcalfe, pr0ps, pr0pscm, android, application, audio, automation, backup, canada, chromecast, code, data recovery, electronics, email, games, git, hardware, homelab, iphone, let's encrypt, linux, macOS, mercurial, networking, nvidia, png, proxmox, python, queen's university, router, security, shell script, sites, steam, vim, website, windows, wine">

  <title>Blog | Carey Metcalfe</title>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-DXC76BHD2F"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-DXC76BHD2F');
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="..">
        <img src="/images/avatar.jpg" id="logo">
      </a>
      <h2><a href=".." class="nohover">Carey Metcalfe</a></h2>
      <p>Software Developer</p>
      <div class="social">
          <a data-email="ac.eflactemc@yerac:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email" target="_blank" rel="noopener noreferrer"><i class="fa fa-envelope fa-lg"></i></a>
          <a href="https://github.com/pR0Ps" title="GitHub" target="_blank" rel="noopener noreferrer"><i class="fa fa-github fa-lg"></i></a>
          <a href="https://twitter.com/CareyMetcalfe" title="Twitter" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter fa-lg"></i></a>
      </div>
      <ul>
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      <a href="..">Home</a>

      &#124; <a href="../blog/index.html">Blog</a>
      &#124; <a href="https://cmetcalfe.ca/feeds/all.rss">RSS Feed</a>
      </p>
<p>
<a href="../blog/index.html">Posts</a>
&#124; <a href="../blog/tags/">Tags</a>
&#124; <a href="../blog/archives.html">Archive</a>
</p>    </header>

<article>
  <div class="article_title">
    <h1><a href="../blog/vim-search-and-replace-in-multiple-files.html">Vim: Search and replace in multiple files</a></h1>
  </div>
  <div class="article_text">
    <p>As is the way with <a href="http://www.vim.org/">Vim</a>, there are a ton of features, but stumbling
on the combination of commands that does what you want can be a bit
difficult sometimes. In this case, the objective is to perform a search
and replace over some files.</p>
<p>This is done in two steps: loading up the files to process, then issuing
a command to run on each of the files.</p>
<p>Load up the files to search using the <code>args</code> command. This command
supports multiple arguments and can use bash-style path completion.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>:args src/*.cpp src/*.hpp README.txt
</code></pre></div></td></tr></table></div>

<p>Perform a replace using sed-style syntax using the <code>argdo</code> command. This
command iterates over all the files loaded by the <code>args</code> command and
performs a command on them. In this case, it's performing the replace
operation.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>:argdo %s/FindMe/ReplaceWithMe/gec | update
</code></pre></div></td></tr></table></div>

<p>The flags used in this case are:</p>
<ul>
<li>g: global search (find more than a single occurance per line)</li>
<li>e: suppress "string not found" error messages</li>
<li>c: confirm each replace</li>
</ul>
<p>Running <code>update</code> after the replace operation saves any changes to the
file before moving to the next one.</p>
  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="../blog/how-to-download-an-entire-google-site.html">How to download an entire Google Site</a></h1>
  </div>
  <div class="article_text">
    <p>When using Google Sites, there is currently no way to make a backup of your
site, or download the site so you can host it on another server.  </p>
<p>This command uses a tool called <code>wget</code> to spider through a website
and download all the public files to the local computer. Unix users will
most likely have the wget tool already installed (if not, you can
install it via your preferred package manager), while Windows users can
get it from <a href="http://gnuwin32.sourceforge.net/packages/wget.htm">here</a>.  </p>
<p>Once wget is installed, run it with the following parameters:  </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">#Downloads all public pages on a Google Site</span>

wget<span class="w"> </span>-e<span class="w"> </span><span class="nv">robots</span><span class="o">=</span>off<span class="w"> </span>-m<span class="w"> </span>-k<span class="w"> </span>-K<span class="w"> </span>-E<span class="w"> </span>-rH<span class="w"> </span>-Dsites.google.com<span class="w"> </span>http://sites.google.com/a/domain/site/
</code></pre></div></td></tr></table></div>

<p>This tells wget to spider through all the links on your site and download
the html files and linked content (such as images). Note that pages that
aren't linked from anywhere on the site won't be downloaded.</p>
<p>This technique will also work for websites other than the ones hosted on Google Sites.</p>
  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="../blog/backing-up-data-to-an-external-server-via-ssh.html">Backing up data to an external server via SSH</a></h1>
  </div>
  <div class="article_text">
    <p>I recently needed to back up the contents of a website, but found that a
disk quota was preventing me from doing so. What I really needed to do
was find a way to compress all the files and, instead of storing the
archive locally, pipe the output to another server.  </p>
<p>After much Googling and messing about, I ended up with the following
command:  </p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="c1">#Uses the tar utility to backup files to an external server</span>

tar<span class="w"> </span>zcvf<span class="w"> </span>-<span class="w"> </span>/path/to/backup<span class="w"> </span><span class="p">|</span><span class="w"> </span>ssh<span class="w"> </span>user@server:port<span class="w"> </span>dd<span class="w"> </span><span class="nv">of</span><span class="o">=</span><span class="s2">&quot;filename.tgz&quot;</span><span class="w"> </span><span class="nv">obs</span><span class="o">=</span><span class="m">1024</span>
</code></pre></div></td></tr></table></div>

<p>Of course, this is only practical for a one-off data dump. If regular
backups were needed, using <a href="http://rsync.samba.org/">rsync</a> would be the best option, as it
only transfers incremental changes. An excellent tutorial can be found
<a href="http://troy.jdmz.net/rsync/index.html">here</a>.</p>
  </div>
</article>

<footer>
<div id="paginator">
  <span id="left">
      <a href="../blog/index10.html"><i class="fa fa-arrow-circle-left"></i> Prev</a>
  </span>
  <span id="right">
      <a href="../blog/index12.html">Next <i class="fa fa-arrow-circle-right"></i></a>
  </span>
  <div>
      <a href="../blog/index.html"> 1 </a>
      <a href="../blog/index2.html"> 2 </a>
      <a href="../blog/index3.html"> 3 </a>
      <a href="../blog/index4.html"> 4 </a>
      <a href="../blog/index5.html"> 5 </a>
      <a href="../blog/index6.html"> 6 </a>
      <a href="../blog/index7.html"> 7 </a>
      <a href="../blog/index8.html"> 8 </a>
      <a href="../blog/index9.html"> 9 </a>
      <a href="../blog/index10.html"> 10 </a>
      <a href="../blog/index11.html">[11]</a>
      <a href="../blog/index12.html"> 12 </a>
      <a href="../blog/index13.html"> 13 </a>
  </div>
</div>
</footer>

    <div id="ending_message">
        <p>&copy; Carey Metcalfe. Built using <a href="http://getpelican.com">Pelican</a>. Theme is <a href="https://github.com/pR0Ps/pelican-subtle">subtle</a> by <a href="http://cmetcalfe.ca">Carey Metcalfe</a>. Based on <a href="https://github.com/giulivo/pelican-svbhack">svbhack</a> by Giulio Fidente.</p>
    </div>
  </main>

  <script type="text/javascript">
    window.addEventListener('load', skipHeader)
  </script>

  <script type="text/javascript">
  window.addEventListener('load', unmangleEmail)
  </script>
</body>
</html>