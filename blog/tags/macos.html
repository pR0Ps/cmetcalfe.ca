<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Carey Metcalfe">
  <meta name="description" content="Posts tagged with 'macOS' on this site">

  <link rel="stylesheet" type="text/css" href="../../theme/css/styles.ec0bdb0f.min.css">

  <script src="../../theme/js/scripts.7db5858b.min.js" type="text/javascript"></script>

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">

  <link href="https://cmetcalfe.ca/feeds/all.rss" type="application/rss+xml" rel="alternate" title="Carey Metcalfe Full RSS Feed" />


  <title>Tag: macOS | Carey Metcalfe</title>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28306875-1', 'cmetcalfe.ca');
  ga('send', 'pageview');
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="../..">
        <img src="/images/avatar.jpg" id="logo">
      </a>
      <h2><a href="../.." class="nohover">Carey Metcalfe</a></h2>
      <p>Software Developer</p>
      <div class="social">
          <a data-email="ac.eflactemc@yerac:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email" target="_blank" rel="noopener noreferrer"><i class="fa fa-envelope fa-lg"></i></a>
          <a href="https://github.com/pR0Ps" title="GitHub" target="_blank" rel="noopener noreferrer"><i class="fa fa-github fa-lg"></i></a>
          <a href="https://twitter.com/CareyMetcalfe" title="Twitter" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter fa-lg"></i></a>
      </div>
      <ul>
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      <a href="../..">Home</a>

      &#124; <a href="../../blog/index.html">Blog</a>
      &#124; <a href="https://cmetcalfe.ca/feeds/all.rss">RSS Feed</a>
      </p>
<p>Tag: macOS
</p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="../../blog/prevent-auto-lock-by-simulating-activity.html">Preventing auto-locking and sleeping by simulating user activity</a></h1>
  </div>
  <div class="article_text">
    <p>This post will detail how to simulate activity on your computer in order to prevent it from
auto-locking or going into sleep mode. Note that this will usually also prevent the "auto-away"
functionality of various chat programs from ever marking you as "away".</p>
<p>Generally you should change your operating system's settings to disable sleeping and auto-locking if
possible instead. These methods are for when you don't have the access or permission to change those
settings (ie. locked-down devices).</p>
<h2>Windows</h2>
<p>This method runs a <a href="https://en.wikipedia.org/wiki/Powershell">Powershell</a> script on login that toggles <a href="https://en.wikipedia.org/wiki/Scroll_lock">scroll lock</a> on/off every minute.
Since scroll lock mostly doesn't do anything on modern systems and the script will press it twice to
immediately unlock/relock it, this is basically unnoticeable to the user. However, if you have
issues simply swap the two <code>{SCROLLLOCK}</code>s in the below command to something else. A full list of
special keys can be found <a href="https://social.technet.microsoft.com/wiki/contents/articles/5169.vbscript-sendkeys-method.aspx">here</a>.</p>
<ol>
<li>Open Explorer (shortcut: <code>Win+E</code>)</li>
<li>Paste <code>%APPDATA%\Microsoft\Windows\Start Menu\Programs\Startup</code> into the location bar and hit
   enter to navigate there.</li>
<li>Right click in the folder and click <code>New &gt; Shortcut</code> to open the shortcut creation wizard.</li>
<li>
<p>Paste the following as the shortcut's location:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>powershell.exe -windowstyle hidden -command &quot;$myshell=New-Object -com \&quot;Wscript.Shell\&quot;;while(1){$myshell.SendKeys(\&quot;{SCROLLLOCK}{SCROLLLOCK}\&quot;);Start-Sleep -Seconds 60}&quot;
</code></pre></div></td></tr></table></div>

</li>
<li>
<p>Give it any name you like and hit <code>Finish</code></p>
</li>
</ol>
<h2>macOS</h2>
<p>This method runs a shell script on login that uses a tool called <a href="https://www.bluem.net/en/projects/cliclick/"><code>cliclick</code></a> to move the
mouse one pixel left and right every minute. This is such a small and fast movement that it's
usually not noticeable unless you're really looking for it.</p>
<ol>
<li>Install <code>cliclick</code> from <a href="https://www.bluem.net/en/projects/cliclick/">the project website</a> or via <a href="https://brew.sh/">brew</a> (<code>brew install cliclick</code>)</li>
<li>Create a script called <code>jiggle</code> with the following contents:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code>#!/bin/sh
while true; do
    cliclick &#39;m:-1,+0&#39; &#39;m:+1,+0&#39;
    sleep 60
done
</code></pre></div></td></tr></table></div>

<ol>
<li>Make the script executable (<code>chmod +x jiggle</code>)</li>
<li>Open System Preferences, search for "login items" and hit enter.</li>
<li>Click the <code>+</code> button, select the <code>jiggle</code> script and hit "Add". You should see it appear in the
   list of programs as a "Unix executable". Check the "Hide" checkbox beside it and exit.</li>
</ol>
<h2>Xorg-based Linux</h2>
<p>Much like the macOS version above, this moves the mouse one pixel left and right every minute. If
you would prefer to instead use a keyboard-based method like the above Windows version, use <code>xdotool
key Scroll_Lock</code> twice instead of the <code>xdotool mousemove_relative *</code> commands in the following
script. More special key names for <code>xdotool</code> can be found <a href="https://gitlab.com/cunidev/gestures/-/wikis/xdotool-list-of-key-codes">here</a>.</p>
<ol>
<li>Install <a href="https://www.semicomplete.com/projects/xdotool/"><code>xdotool</code></a> (usually available via your package manager)</li>
<li>Create a script called <code>jiggle</code> with the following contents:</li>
</ol>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span></pre></div></td><td class="code"><div><pre><span></span><code>#!/bin/sh
while true; do
    xdotool mousemove_relative --sync -- -1 0
    xdotool mousemove_relative 1 0
    sleep 60
done
</code></pre></div></td></tr></table></div>

<ol>
<li>Make the script executable (<code>chmod +x jiggle</code>)</li>
<li>Configure your OS to run the script at login. Usually this would be done through the desktop
   environment's settings or via something like <a href="https://www.freedesktop.org/wiki/Software/systemd/"><code>systemd</code></a>.</li>
</ol>
<h2>Wayland-based Linux</h2>
<p>Some preliminary research suggests that this is possible on Wayland using <a href="https://github.com/ReimuNotMoe/ydotool"><code>ydotool</code></a> as a
replacement for <code>xdotool</code>. I don't currently run a Wayland-based setup so I can't test it. If you
manage to find a solution for Wayland feel free to send it to me and I'll update the post.</p>
  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="../../blog/diagnosing-periodic-high-ping-times-on-macos.html">Diagnosing periodic high ping times on macOS</a></h1>
  </div>
  <div class="article_text">
    <h2>Background</h2>
<p>Up until a few months ago, my home network setup was pretty terrible. The entire house ran off the
WiFi provided by an <a href="https://openwrt.org/">OpenWRT</a>-powered <a href="https://www.tp-link.com/us/products/details/TL-WDR3600.html">TP-Link WDR3600</a> from 2013 in the far corner of the
house. So when I fired up a game on my laptop via <a href="https://store.steampowered.com/streaming/">Steam in-home streaming</a> and got unplayable lag
and stuttering, I just figured that the issue was the network and left it at that. After all, the
gaming PC was connected via WiFI from the opposite corner of the house with no shortage of walls in
between.</p>
<p>In November 2018, I finally got serious about the network upgrade I had been planning. I'll probably
do a more in-depth post about this at some point, but to make a long story short: Most things are
wired and what isn't is connected via a modern, centrally-located access point. Performance is
noticeably better in general and <em>amazingly</em> better for high-bandwidth tasks like transferring
files.</p>
<p>So when I excitedly fired up the same game on my laptop, I was pretty surprised that it was still
unplayable. At this point I should clarify that the game was not something that requires a CRT and
wired controller for super-low response times. So when I say unplayable, I mean legitimately
unplayable. I'm talking periodic lag spikes that caused the video to drop a few seconds or more
behind the inputs. Even turn-based games would have issues with the amount of lag.</p>
<h2>Narrowing the scope</h2>
<p>To make sure it wasn't an issue with the streaming software, the gaming PC, or the network, I used
<code>ping</code> to test the latency to the gateway from a few hosts. All the computers <em>except</em> my laptop had
normal ping times. Running it on my laptop looked like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span>
<span class="normal">29</span>
<span class="normal">30</span>
<span class="normal">31</span>
<span class="normal">32</span>
<span class="normal">33</span>
<span class="normal">34</span>
<span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span></pre></div></td><td class="code"><div><pre><span></span><code>$<span class="w"> </span>ping<span class="w"> </span>pfsense.lan<span class="w"> </span><span class="p">|</span><span class="w"> </span>tee<span class="w"> </span>&gt;<span class="o">(</span>grep<span class="w"> </span>-oP<span class="w"> </span><span class="s1">&#39;time=\K\S*&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>spark<span class="o">)</span>
PING<span class="w"> </span>pfsense.lan<span class="w"> </span><span class="o">(</span><span class="m">192</span>.168.1.1<span class="o">)</span>:<span class="w"> </span><span class="m">56</span><span class="w"> </span>data<span class="w"> </span>bytes
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.574<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">1</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">0</span>.996<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">2</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.568<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">92</span>.153<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">4</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">39</span>.079<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">5</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">14</span>.307<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">6</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.570<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">7</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.636<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">8</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.698<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">9</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.568<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">10</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.550<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">11</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.106<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">12</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.832<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">13</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.816<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">14</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">36</span>.598<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">15</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">42</span>.863<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">16</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">20</span>.747<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">17</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">3</span>.112<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">18</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.695<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">19</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.795<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">20</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.504<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">21</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.644<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">22</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.732<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">23</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.581<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">24</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.794<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">25</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">33</span>.367<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">26</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">124</span>.282<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">27</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">97</span>.719<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">28</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">76</span>.501<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">29</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.734<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">30</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.622<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">31</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.758<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">32</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.578<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">33</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.527<span class="w"> </span>ms
<span class="m">64</span><span class="w"> </span>bytes<span class="w"> </span>from<span class="w"> </span><span class="m">192</span>.168.1.1:<span class="w"> </span><span class="nv">icmp_seq</span><span class="o">=</span><span class="m">34</span><span class="w"> </span><span class="nv">ttl</span><span class="o">=</span><span class="m">64</span><span class="w"> </span><span class="nv">time</span><span class="o">=</span><span class="m">1</span>.017<span class="w"> </span>ms
^C
<span class="w"> </span>▁▁▁▆▃▁▁▁▁▁▁▁▁▁▃▃▂▁▁▁▁▁▁▁▁▂█▆▅▁▁▁▁▁▁
</code></pre></div></td></tr></table></div>

<p>(sweet graph at the end courtesy of <a href="https://github.com/holman/spark/wiki/Wicked-Cool-Usage#visualize-ping-times-jnovinger">spark</a>)</p>
<p>Notice the periodic spikes. Clearly there's something going on with the network connection on my
laptop. Connecting via a wired connection and running it again confirmed that it was only happening
on WiFi.</p>
<h2>WiFi debugging</h2>
<p>Now that I had narrowed the issue down to an issue with the WiFi, I could start trying to debug it.</p>
<p>After coming across <a href="https://superuser.com/questions/585473/debugging-osx-airport-wifi-connection/735572#735572">this very helpful post</a> explaining how, I enabled WiFi debug logging by running:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code>sudo<span class="w"> </span>/System/Library/PrivateFrameworks/Apple80211.framework/Versions/A/Resources/airport<span class="w"> </span>en0<span class="w"> </span>debug<span class="w"> </span>+AllUserland
</code></pre></div></td></tr></table></div>

<p>(remember to turn this off after, <code>airport</code> is pretty chatty with debug logs enabled)</p>
<p>I then watched the wifi log (<code>sudo tail -f /var/log/wifi.log</code>) as I ran the same <code>ping</code> command.
Whenever I saw ping times spike, I also saw the following entries in the WiFi log:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span></pre></div></td><td class="code"><div><pre><span></span><code>Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.764<span class="w"> </span>IPC:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>ADDED<span class="w"> </span>XPC<span class="w"> </span>CLIENT<span class="w"> </span>CONNECTION<span class="w"> </span><span class="o">[</span>QSyncthingTray<span class="w"> </span><span class="o">(</span><span class="nv">pid</span><span class="o">=</span><span class="m">14397</span>,<span class="w"> </span><span class="nv">euid</span><span class="o">=</span><span class="m">501</span>,<span class="w"> </span><span class="nv">egid</span><span class="o">=</span><span class="m">20</span><span class="o">)]</span>
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.765<span class="w"> </span>Info:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>SCAN<span class="w"> </span>request<span class="w"> </span>received<span class="w"> </span>from<span class="w"> </span>pid<span class="w"> </span><span class="m">14397</span><span class="w"> </span><span class="o">(</span>QSyncthingTray<span class="o">)</span><span class="w"> </span>with<span class="w"> </span>priority<span class="w"> </span><span class="m">0</span>
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w"> </span>Scan:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>Cache-assisted<span class="w"> </span>scan<span class="w"> </span>request<span class="w"> </span><span class="k">for</span><span class="w"> </span>QSyncthingTray<span class="w"> </span>on<span class="w"> </span>channel<span class="w"> </span><span class="m">1</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>require<span class="w"> </span>a<span class="w"> </span>live<span class="w"> </span>scan
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w"> </span>Scan:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>Cache-assisted<span class="w"> </span>scan<span class="w"> </span>request<span class="w"> </span><span class="k">for</span><span class="w"> </span>QSyncthingTray<span class="w"> </span>on<span class="w"> </span>channel<span class="w"> </span><span class="m">2</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>require<span class="w"> </span>a<span class="w"> </span>live<span class="w"> </span>scan
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w"> </span>Scan:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>Cache-assisted<span class="w"> </span>scan<span class="w"> </span>request<span class="w"> </span><span class="k">for</span><span class="w"> </span>QSyncthingTray<span class="w"> </span>on<span class="w"> </span>channel<span class="w"> </span><span class="m">3</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>require<span class="w"> </span>a<span class="w"> </span>live<span class="w"> </span>scan
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w"> </span>Scan:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>Cache-assisted<span class="w"> </span>scan<span class="w"> </span>request<span class="w"> </span><span class="k">for</span><span class="w"> </span>QSyncthingTray<span class="w"> </span>on<span class="w"> </span>channel<span class="w"> </span><span class="m">4</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>require<span class="w"> </span>a<span class="w"> </span>live<span class="w"> </span>scan
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w"> </span>Scan:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>Cache-assisted<span class="w"> </span>scan<span class="w"> </span>request<span class="w"> </span><span class="k">for</span><span class="w"> </span>QSyncthingTray<span class="w"> </span>on<span class="w"> </span>channel<span class="w"> </span><span class="m">5</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>require<span class="w"> </span>a<span class="w"> </span>live<span class="w"> </span>scan
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w"> </span>Scan:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>Cache-assisted<span class="w"> </span>scan<span class="w"> </span>request<span class="w"> </span><span class="k">for</span><span class="w"> </span>QSyncthingTray<span class="w"> </span>on<span class="w"> </span>channel<span class="w"> </span><span class="m">6</span><span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>require<span class="w"> </span>a<span class="w"> </span>live<span class="w"> </span>scan
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w"> </span>Scan:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>Cache-assisted<span class="w"> </span>scan<span class="w"> </span>request<span class="w"> </span><span class="k">for</span><span class="w"> </span>QSyncthingTray<span class="w"> </span>does<span class="w"> </span>not<span class="w"> </span>require<span class="w"> </span>a<span class="w"> </span>live<span class="w"> </span>scan
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w"> </span>AutoJoin:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>Successful<span class="w"> </span>cache-assisted<span class="w"> </span>scan<span class="w"> </span>request<span class="w"> </span><span class="k">for</span><span class="w"> </span>QSyncthingTray<span class="w"> </span>with<span class="w"> </span>channels<span class="w"> </span><span class="o">{(</span>
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w">     </span>&lt;CWChannel:<span class="w"> </span>0x7f9073514e70&gt;<span class="w"> </span><span class="o">[</span><span class="nv">channelNumber</span><span class="o">=</span><span class="m">1</span><span class="o">(</span>2GHz<span class="o">)</span>,<span class="w"> </span><span class="nv">channelWidth</span><span class="o">={</span>20MHz<span class="o">}</span>,<span class="w"> </span>active<span class="o">]</span>,
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w">     </span>&lt;CWChannel:<span class="w"> </span>0x7f90735507b0&gt;<span class="w"> </span><span class="o">[</span><span class="nv">channelNumber</span><span class="o">=</span><span class="m">2</span><span class="o">(</span>2GHz<span class="o">)</span>,<span class="w"> </span><span class="nv">channelWidth</span><span class="o">={</span>20MHz<span class="o">}</span>,<span class="w"> </span>active<span class="o">]</span>,
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w">     </span>&lt;CWChannel:<span class="w"> </span>0x7f9073526370&gt;<span class="w"> </span><span class="o">[</span><span class="nv">channelNumber</span><span class="o">=</span><span class="m">3</span><span class="o">(</span>2GHz<span class="o">)</span>,<span class="w"> </span><span class="nv">channelWidth</span><span class="o">={</span>20MHz<span class="o">}</span>,<span class="w"> </span>active<span class="o">]</span>,
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w">     </span>&lt;CWChannel:<span class="w"> </span>0x7f9073526420&gt;<span class="w"> </span><span class="o">[</span><span class="nv">channelNumber</span><span class="o">=</span><span class="m">4</span><span class="o">(</span>2GHz<span class="o">)</span>,<span class="w"> </span><span class="nv">channelWidth</span><span class="o">={</span>20MHz<span class="o">}</span>,<span class="w"> </span>active<span class="o">]</span>,
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w">     </span>&lt;CWChannel:<span class="w"> </span>0x7f907354ddb0&gt;<span class="w"> </span><span class="o">[</span><span class="nv">channelNumber</span><span class="o">=</span><span class="m">5</span><span class="o">(</span>2GHz<span class="o">)</span>,<span class="w"> </span><span class="nv">channelWidth</span><span class="o">={</span>20MHz<span class="o">}</span>,<span class="w"> </span>active<span class="o">]</span>,
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w">     </span>&lt;CWChannel:<span class="w"> </span>0x7f907354c6c0&gt;<span class="w"> </span><span class="o">[</span><span class="nv">channelNumber</span><span class="o">=</span><span class="m">6</span><span class="o">(</span>2GHz<span class="o">)</span>,<span class="w"> </span><span class="nv">channelWidth</span><span class="o">={</span>20MHz<span class="o">}</span>,<span class="w"> </span>active<span class="o">]</span>
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.766<span class="w"> </span><span class="o">)}</span><span class="w"> </span>took<span class="w"> </span><span class="m">0</span>.0007<span class="w"> </span>seconds,<span class="w"> </span>returned<span class="w"> </span><span class="m">5</span><span class="w"> </span>results
&lt;<span class="w"> </span>insert<span class="w"> </span>logs<span class="w"> </span>like<span class="w"> </span>above<span class="w"> </span><span class="k">for</span><span class="w"> </span>all<span class="w"> </span>channels<span class="w"> </span>all<span class="w"> </span>the<span class="w"> </span>way<span class="w"> </span>up<span class="w"> </span>to<span class="w"> </span><span class="m">144</span><span class="w"> </span><span class="k">in</span><span class="w"> </span>batches<span class="w"> </span>of<span class="w"> </span><span class="m">6</span><span class="w"> </span>&gt;
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:33.779<span class="w"> </span>IPC:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>INVALIDATED<span class="w"> </span>XPC<span class="w"> </span>CLIENT<span class="w"> </span>CONNECTION<span class="w"> </span><span class="o">[</span>QSyncthingTray<span class="w"> </span><span class="o">(</span><span class="nv">pid</span><span class="o">=</span><span class="m">14397</span>,<span class="w"> </span><span class="nv">euid</span><span class="o">=</span><span class="m">501</span>,<span class="w"> </span><span class="nv">egid</span><span class="o">=</span><span class="m">20</span><span class="o">)]</span>
&lt;<span class="w"> </span><span class="m">10</span><span class="w"> </span>seconds<span class="w"> </span>pass&gt;
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:43.847<span class="w"> </span>IPC:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>ADDED<span class="w"> </span>XPC<span class="w"> </span>CLIENT<span class="w"> </span>CONNECTION<span class="w"> </span><span class="o">[</span>QSyncthingTray<span class="w"> </span><span class="o">(</span><span class="nv">pid</span><span class="o">=</span><span class="m">14397</span>,<span class="w"> </span><span class="nv">euid</span><span class="o">=</span><span class="m">501</span>,<span class="w"> </span><span class="nv">egid</span><span class="o">=</span><span class="m">20</span><span class="o">)]</span>
&lt;<span class="w"> </span>same<span class="w"> </span>scanning<span class="w"> </span>logs<span class="w"> </span>as<span class="w"> </span>above<span class="w"> </span>&gt;
Tue<span class="w"> </span>Nov<span class="w"> </span><span class="m">27</span><span class="w"> </span><span class="m">02</span>:01:46.741<span class="w"> </span>IPC:<span class="w"> </span>&lt;airportd<span class="o">[</span><span class="m">68</span><span class="o">]</span>&gt;<span class="w"> </span>INVALIDATED<span class="w"> </span>XPC<span class="w"> </span>CLIENT<span class="w"> </span>CONNECTION<span class="w"> </span><span class="o">[</span>QSyncthingTray<span class="w"> </span><span class="o">(</span><span class="nv">pid</span><span class="o">=</span><span class="m">14397</span>,<span class="w"> </span><span class="nv">euid</span><span class="o">=</span><span class="m">501</span>,<span class="w"> </span><span class="nv">egid</span><span class="o">=</span><span class="m">20</span><span class="o">)]</span>
&lt;<span class="w"> </span>...<span class="w"> </span>and<span class="w"> </span>repeat<span class="w"> </span>&gt;
</code></pre></div></td></tr></table></div>

<p>This pretty clearly indicates that the <a href="https://github.com/sieren/QSyncthingTray">QSyncthingTray</a> application (a tray icon to monitor
<a href="https://syncthing.net/">Syncthing</a>) was periodically requesting WiFi scans which, in turn, caused the bursts of latency.
After quitting the application and running <code>ping</code> again, the times were all &lt;2ms, even after running
for a few minutes. Also, when I started up the game again to test it, the lag was completely gone!</p>
<h2>Digging deeper</h2>
<p>Since QSyncthingTray is open source, I filed a <a href="https://github.com/sieren/QSyncthingTray/issues/237">bug report</a> on the project and dug into the code
to see if I could pinpoint the issue. After finding nothing out of the ordinary and doing a bunch of
searching the internet, it turns out that it's not an issue with QSyncthingTray at all, but with
<a href="https://www.qt.io">Qt</a>, a cross-platform SDK that QSyncthingTray and many other programs use. Some classmates and I
actually used it to make a game called <a href="https://github.com/pR0Ps/ParticleStorm">ParticleStorm</a> back in university.</p>
<p>There are open bug reports against this issue from <a href="https://bugreports.qt.io/browse/QTBUG-34641">2013</a>, <a href="https://bugreports.qt.io/browse/QTBUG-40332">2014</a>, and <a href="https://bugreports.qt.io/browse/QTBUG-46015">2015</a>. Additionally,
there are loads of <a href="https://lostdomain.org/2017/06/17/qt-qnetworkaccessmanager-causing-latency-spikes-on-wifi/">blog</a> <a href="https://justus.berlin/2016/04/reducing-cpu-load-and-energy-consumption-of-texstudio-on-the-mac/">posts</a> and <a href="https://github.com/qbittorrent/qBittorrent/commit/c2b6e1ce1aa402b143d0154748c518a87bc6424a">per</a>-<a href="https://github.com/sqlitebrowser/sqlitebrowser/commit/73946400c32d1f7cfcd4672ab0ab3f563eb84f4e">program</a> <a href="https://github.com/KDE/krita/commit/19ba224692a52b1d5799fda308bed4b02ff38f7a">workarounds</a>. It's a little
disappointing that just running a network-enabled Qt application can seriously disrupt real-time
applications on the same system. Granted, I have no knowledge of the complexities of this issue, but
at the very least it seems <a href="https://doc.qt.io/qt-5/qnetworkconfigurationmanager.html">the documentation</a> could be clearer on the issue so developers stop
<a href="https://www.reddit.com/r/krita/comments/9xea9b/this_is_gonna_sound_crazy_but_is_krita/e9tfify/">getting surprised by it</a>.</p>
<p>Anyway, the "fix" is to set <code>QT_BEARER_POLL_TIMEOUT=-1</code> as an environment variable on your system.
Honestly, I've just stopped using QSyncthingTray instead. Not that it's not useful, I just realized
that I didn't really need it. Syncthing works well enough that I don't find myself ever worrying
about it. If a Qt application ever becomes an essential part of my setup I guess I'll have to
revisit this.</p>
<h2>Takeaways</h2>
<ol>
<li>
<p>When macOS scans for networks (as it does when requested by an application, when you click the WiFi
   icon, or when you request your location) it causes high ping times and dropped packets. According to
   bug reports, scanning for WiFi networks on other OS's causes the same issues. This is something I
   didn't really expect, but good to know going forward.</p>
</li>
<li>
<p>Qt has a bug where instantiating a <code>QNetworkConfigurationManager</code> causes it to scan for WiFi
   networks every 10 seconds by default. Some applications set the <code>QT_BEARER_POLL_TIMEOUT</code> environment
   variable themselves to disable this behaviour, but the majority probably have no idea that it's even
   an issue until a user reports it.</p>
</li>
</ol>
<p>So if you're seeing regular latency spikes, audit what programs you have running. Specifically look
for programs built with Qt. Setting the <code>QT_BEARER_POLL_TIMEOUT</code> environment variable to <code>-1</code> can
help with these. Applications that use your location <a href="https://apple.stackexchange.com/questions/263638/macbook-pro-experiencing-ping-spikes-to-local-router/317431#317431">could also be the culprit</a>. Who knew keeping
your ping down to an acceptable level was such a minefield...</p>
  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="../../blog/remove-app-from-cmd-tab-switcher.html">Remove an application from the cmd-tab switcher on macOS</a></h1>
  </div>
  <div class="article_text">
    <p>At work, I use <a href="http://iterm2.com">iTerm2</a> as my main terminal emulator. For quick access, I have
it configured to drop down from the top of the screen when <code>F12</code> is pressed.</p>
<p>Unfortunately, it also shows up in the application switcher, bumping up into
the 'last used' position whenever it's activated and getting in the way. Since
I already have access to the terminal via <code>F12</code>, there's no need for it to be
shown in the application switcher as well.</p>
<p>Changing how an application behaves can be done by editing its <code>Info.plist</code>
file. The key <code>LSUIElement</code> (<a href="https://developer.apple.com/library/mac/documentation/General/Reference/InfoPlistKeyReference/Articles/LaunchServicesKeys.html#//apple_ref/doc/uid/20001431-108256">according to the Apple documentation</a>)
"Specifies whether the app is an agent app, that is, an app that should not
appear in the Dock or Force Quit window."</p>
<p>To set this key, open the application's <code>Info.plist</code> at
<code>/Applications/[application name].app/Contents/Info.plist</code> and add
<code>&lt;key&gt;LSUIElement&lt;/key&gt;&lt;true/&gt;</code> after the first <code>&lt;dict&gt;</code> tag. The result should
look something like this:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="cp">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="cp">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span>
<span class="nt">&lt;plist</span><span class="w"> </span><span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
<span class="nt">&lt;dict&gt;</span>
<span class="hll"><span class="w">    </span><span class="nt">&lt;key&gt;</span>LSUIElement<span class="nt">&lt;/key&gt;&lt;true/&gt;</span>
</span><span class="w">    </span><span class="cm">&lt;!-- The rest of the plist data --&gt;</span>
<span class="nt">&lt;/dict&gt;</span>
<span class="nt">&lt;/plist&gt;</span>
</code></pre></div></td></tr></table></div>

<p>Once the <code>LSUIElement</code> key is set to <code>true</code>, relaunch the application to see the
changes.</p>
<p>Be warned that not only does this remove the application from the
application switcher, it also removes it from the dock and stops it from showing
the menu bar on the top of the screen.</p>
  </div>
</article>

<footer>
<div id="paginator">
  <span id="left">
  </span>
  <span id="right">
  </span>
  <div>
      <a href="../../blog/tags/macos.html">[1]</a>
  </div>
</div>
</footer>

    <div id="ending_message">
        <p>&copy; Carey Metcalfe. Built using <a href="http://getpelican.com">Pelican</a>. Theme is <a href="https://github.com/pR0Ps/pelican-subtle">subtle</a> by <a href="http://cmetcalfe.ca">Carey Metcalfe</a>. Based on <a href="https://github.com/giulivo/pelican-svbhack">svbhack</a> by Giulio Fidente.</p>
    </div>
  </main>

  <script type="text/javascript">
    window.addEventListener('load', skipHeader)
  </script>

  <script type="text/javascript">
  window.addEventListener('load', unmangleEmail)
  </script>
</body>
</html>