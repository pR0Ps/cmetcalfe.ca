<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="Carey Metcalfe">
  <meta name="description" content="Posts tagged with 'git' on this site">

  <link rel="stylesheet" type="text/css" href="../../theme/css/styles.425931e9.min.css">

  <script src="../../theme/js/scripts.ab06d70e.min.js" type="text/javascript"></script>

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">

  <link href="https://cmetcalfe.ca/feeds/all.rss" type="application/rss+xml" rel="alternate" title="Carey Metcalfe Full RSS Feed" />


  <title>Tag: git | Carey Metcalfe</title>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28306875-1', 'cmetcalfe.ca');
  ga('send', 'pageview');
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="../..">
        <img src="/images/avatar.jpg" id="logo">
      </a>
      <h2><a href="../.." class="nohover">Carey Metcalfe</a></h2>
      <p>Software Developer</p>
      <div class="social">
          <a data-email="ac.eflactemc@yerac:otliam" data-title="Email" title="You need javascript enabled to view this email" class="email" target="_blank" rel="noopener noreferrer"><i class="fa fa-envelope fa-lg"></i></a>
          <a href="https://github.com/pR0Ps" title="GitHub" target="_blank" rel="noopener noreferrer"><i class="fa fa-github fa-lg"></i></a>
          <a href="https://twitter.com/CareyMetcalfe" title="Twitter" target="_blank" rel="noopener noreferrer"><i class="fa fa-twitter fa-lg"></i></a>
      </div>
      <ul>
      </ul>
    </div>
  </aside>

  <main id="main">
    <header>
      <p id="header">
      <a href="../..">Home</a>

      &#124; <a href="../../blog/index.html">Blog</a>
      &#124; <a href="https://cmetcalfe.ca/feeds/all.rss">RSS Feed</a>
      </p>
<p>Tag: git
</p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="../../blog/git-checkout-autocomplete-local-branches-only.html">Git checkout - autocomplete local branches only</a></h1>
  </div>
  <div class="article_text">
    <p>Having Git autocomplete branch names when doing a checkout is super useful.  Having the autocomplete
hang for 30 seconds because it has to look up all 3000 of the remote branches in a massive repo is
not so useful. It's actually pretty frustrating.</p>
<p>My solution: changing the <code>git checkout</code> autocomplete to only look at local branches, while using a
<code>git checkoutr</code> alias to preserve the original behaviour (because sometimes it's actually needed).</p>
<p>How it's done:</p>
<h2>Define an alias for checkout</h2>
<p>We're going to use the same checkout command for the remote checkout, but need to have a different
command so the script can differentiate between them.  Making an alias does exactly this.</p>
<p>Create the alias by running <code>git config --global alias.checkoutr checkout</code></p>
<h2>Change the autocompletion function</h2>
<p>The checkout autocomplete behaviour is defined in a function called <code>_git_checkout</code> in the git
autocompletion file. We're going to override the function with our own version that has different
autocomplete logic in it.</p>
<p>The location of the file varies over different operating systems and configurations, but here are a
few spots to look:</p>
<ul>
<li><code>/etc/bash_completion.d/git</code></li>
<li><code>/usr/share/bash-completion/completions/git</code></li>
</ul>
<p>For a brew-installed git autocomplete on macOS, the file will probably be
<code>$(brew --prefix)/etc/bash_completion.d/git-completion.bash</code></p>
<p>Once you've found the file, copy the entire <code>_git_checkout</code> function into your <code>.bashrc</code> (or
equivalent non-login shell startup script). Now look for the line</p>
<p><code>__git_complete_refs $track_opt</code></p>
<p>We're going to replace that line with:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$command</span><span class="s2">&quot;</span> <span class="o">=</span> <span class="s2">&quot;checkoutr&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    __git_complete_refs <span class="nv">$track_opt</span>
<span class="k">else</span>
    __gitcomp_direct <span class="s2">&quot;</span><span class="k">$(</span>__git_heads <span class="s2">&quot;&quot;</span> <span class="s2">&quot;</span><span class="nv">$cur</span><span class="s2">&quot;</span> <span class="s2">&quot; &quot;</span><span class="k">)</span><span class="s2">&quot;</span>
<span class="k">fi</span>
</code></pre></div>
</td></tr></table>
<p>After saving and re-sourcing your <code>.bashrc</code> file, git will autocomplete local branches and tags when
using <code>git checkout</code>, but will go back to the default behaviour of autocompleting all references
when using <code>git checkoutr</code>.</p>
<p>Credits to a combination of answers on <a href="disable-auto-completion-of-remote-branches-in-git-bash">this</a> StackOverflow post.</p>
<p>EDIT 2017-10-02: Updated to work with <a href="https://github.com/git/git/commit/15b4a163950c2e8660a7797ce3975ccea8705f80#diff-f37c4f4a898819f0ca4b5ff69e81d4d9">git v2.13.0</a> thanks to <a href="https://gist.github.com/mmrko/b3ec6da9bea172cdb6bd83bdf95ee817#gistcomment-2218059">Alexander Ko's comment</a>.<br>
EDIT 2018-03-24: Updated to <a href="https://github.com/git/git/commit/227307a639c96b3579b7fe60840fdae123d1ee88">speed up branch and tag completion</a>.</p>
  </div>
</article>
<hr />
<article>
  <div class="article_title">
    <h1><a href="../../blog/github-convert-issue-to-pull-request.html">GitHub: Convert an issue to a pull request</a></h1>
  </div>
  <div class="article_text">
    <p><a href="http://github.com">GitHub</a> currently doesn't provide a way to convert an issue to a pull request in their interface.
However, the capability exists in their <a href="http://developer.github.com/v3/pulls/#alternative-input">Pull Request API</a>.</p>
<div class="admonition update">
<p class="admonition-title">Update</p>
<p>I've built a self-hostable webapp called <a href="https://github.com/pR0Ps/gh-i2p">gh-i2p</a> that makes this process easier.</p>
</div>
<p>To call the API using a simple <code>curl</code> command, run the command:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>curl --user <span class="s2">&quot;[github username]&quot;</span> <span class="se">\</span>
     --request POST <span class="se">\</span>
     --data <span class="s1">&#39;{&quot;issue&quot;: &quot;[issue num]&quot;, &quot;head&quot;: &quot;[branch to merge from]&quot;, &quot;base&quot;: &quot;[branch to merge into]&quot;}&#39;</span> <span class="se">\</span>
     https://api.github.com/repos/<span class="o">[</span>user<span class="o">]</span>/<span class="o">[</span>repo<span class="o">]</span>/pulls
</code></pre></div>
</td></tr></table>
<p>For example, to make <code>user1</code> change issue 13 into a pull request to merge branch <code>test_branch</code> into
<code>master</code> in the <code>testing_repo</code> repository belonging to <code>user2</code>, the command would be:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>curl --user <span class="s1">&#39;user1&#39;</span> <span class="se">\</span>
     --request POST <span class="se">\</span>
     --data <span class="s1">&#39;{&quot;issue&quot;: &quot;13&quot;, &quot;head&quot;: &quot;test_branch&quot;, &quot;base&quot;: &quot;master&quot;}&#39;</span> <span class="se">\</span>
     https://api.github.com/repos/user2/testing_repo/pulls
</code></pre></div>
</td></tr></table>
<p>To specify a fork of a repository to merge from, put the username followed by a semicolon in front
of the branch name like so: <code>"username:branch_name"</code></p>
<p>After running the command, you will be prompted for your GitHub password. Enter it and curl should
output the JSON response from the API. Make sure to check this response for errors!</p>
  </div>
</article>

<footer>
<div id="paginator">
  <span id="left">
  </span>
  <span id="right">
  </span>
  <div>
      <a href="../../blog/tags/git.html">[1]</a>
  </div>
</div>
</footer>

    <div id="ending_message">
        <p>&copy; Carey Metcalfe. Built using <a href="http://getpelican.com">Pelican</a>. Theme is <a href="https://github.com/pR0Ps/pelican-subtle">subtle</a> by <a href="http://cmetcalfe.ca">Carey Metcalfe</a>. Based on <a href="https://github.com/giulivo/pelican-svbhack">svbhack</a> by Giulio Fidente.</p>
    </div>
  </main>

  <script type="text/javascript">
    window.addEventListener('load', skipHeader)
  </script>

  <script type="text/javascript">
  window.addEventListener('load', unmangleEmail)
  </script>
</body>
</html>